  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
  </head>
  <body onload="load_countries()">
    <h1>Statistiques COVID-19 par pays</h1>
    <div class="row">
        <label for="select_countries">Choisir un pays :</label>
        <select id="select_countries" onchange="load_data()"></select>
    </div>
    <div id="error"></div>
    <div id="result" class="card" style="display:none;">
        <h2>
            <span id="countryLabel"></span>
        </h2>
        <p><strong>Cas totaux :</strong> <span id="cases">0</span></p>
        <p><strong>Décès : </strong> <span id="deaths">0</span></p>
        <p><strong>Guérisons :</strong> <span id="recovered">0</span></p>
    </div>
    <script>
        function load_countries() {
        fetch('https://disease.sh/v3/covid-19/countries')
        .then(response => response.json())
        .then(data => {
            const countrySelect = document.getElementById('select_countries');
            countrySelect.innerHTML = '';

            data.forEach(c => {
                const opt = document.createElement('option');
                opt.value = c.country;
                opt.textContent = c.country;
                countrySelect.appendChild(opt);
            });
        })
        .catch(error => {
            console.error('Erreur:', err);
            document.getElementById('error').textContent = 'Impossible de charger la liste des pays.';
        });
    }
    function load_data() {
        const country = document.getElementById('select_countries').value;
        const errorDiv = document.getElementById('error');
        const resultDiv = document.getElementById('result');
        errorDiv.textContent = '';
        resultDiv.style.display = 'none';
        const url = `https://disease.sh/v3/covid-19/countries/`+encodeURIComponent(country);
        fetch(url)
        .then(response => response.json())
        .then(data => {
            document.getElementById('countryLabel').textContent = data.country;
            document.getElementById('cases').textContent = data.cases;
            document.getElementById('deaths').textContent = data.deaths;
            document.getElementById('recovered').textContent = data.recovered.toLocaleString();
            resultDiv.style.display = 'block';
        })
        .catch(error => {
            errorDiv.textContent = 'Erreur:' + error.message;   
        });
    }
    </script>

</body>
  </html>
